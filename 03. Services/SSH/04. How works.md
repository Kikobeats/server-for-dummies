## How SSH works

Resume of messages:

![](../../assets/ssh-resume.png)

The process is similar to HTTP with SSL but more simply. Check the SSL section to get more information about handhsake process.

1) Client first message

![](../../assets/ssh-1.png)

2) Server first message

![](../../assets/ssh-2.png)

3) Client send `CLIENT_KEY_EXCHANGE` (Public key in the client)

![](../../assets/ssh-3.png)

4) Server send `SERVER_KEY_EXCHANGE` (Public key in the server)

![](../../assets/ssh-4.png)

5) Client send to server the `Diffie-Hellman Key Exchange` (p and g values)

![](../../assets/ssh-5.png)

6) Server receive the values of the `Diffie-Hellman Key Exchange` and calculate the shared secret

![](../../assets/ssh-6.png)

7) Client calculate shared secret too

![](../../assets/ssh-7.png)
